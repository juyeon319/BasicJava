CREATE OR REPLACE FUNCTION FN_ORDERID(
P_DATE IN VARCHAR2)
RETURN VARCHAR2
IS
L_ORDERID tbl_order.order_id%TYPE;
L_CNT NUMBER :=0;
L_DATE CHAR(9):=P_DATE||'%';
BEGIN
SELECT COUNT(*) INTO L_CNT
    FROM TBL_ORDER
    WHERE ORDER_ID LIKE L_DATE;
    
    IF L_CNT = 0 THEN
        L_ORDERID :=P_DATE||TRIM('001');
        ELSE
        SELECT MAX(ORDER_ID)+1 INTO L_ORDERID
        FROM TBL_ORDER
         WHERE ORDER_ID LIKE L_DATE;
    END IF;
    RETURN L_ORDERID;
END;

commit;

SELECT FN_ORDERID('20230608') FROM DUAL;